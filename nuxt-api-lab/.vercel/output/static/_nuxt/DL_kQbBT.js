import{v as T,_ as q,o as x,c as D,x as F,g as L,m as w,w as c,q as H,y as I,p as A,z as $,r as _,A as M,b as d,a as l,d as m,l as O,s as r,n as k,t as f}from"./BxqDI8qG.js";import{B as U,a as z,b as E}from"./B0TTSZ-O.js";const N=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const V=s=>s==="";const G=(...s)=>s.filter((e,a,t)=>!!e&&e.trim()!==""&&t.indexOf(e)===a).join(" ").trim();const W=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const R=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());const Z=s=>{const e=R(s);return e.charAt(0).toUpperCase()+e.slice(1)};var C={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const J=({name:s,iconNode:e,absoluteStrokeWidth:a,"absolute-stroke-width":t,strokeWidth:n,"stroke-width":o,size:u=C.width,color:g=C.stroke,...p},{slots:y})=>T("svg",{...C,...p,width:u,height:u,stroke:g,"stroke-width":V(a)||V(t)||a===!0||t===!0?Number(n||o||C["stroke-width"])*24/Number(u):n||o||C["stroke-width"],class:G("lucide",p.class,...s?[`lucide-${W(Z(s))}-icon`,`lucide-${W(s)}`]:["lucide-icon"]),...!y.default&&!N(p)&&{"aria-hidden":"true"}},[...e.map(v=>T(...v)),...y.default?[y.default()]:[]]);const b=(s,e)=>(a,{slots:t,attrs:n})=>T(J,{...n,...a,iconNode:e,name:s},t);const Q=b("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);const X=b("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Y=b("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const K=b("sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);const ee=b("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const te=b("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),ae={},se={class:"rounded-card bg-surface shadow-card p-6"};function re(s,e){return x(),D("section",se,[F(s.$slots,"default")])}const j=Object.assign(q(ae,[["render",re]]),{__name:"UiBaseCard"}),ne=L({__name:"Typography",props:{variant:{default:"body"},as:{default:void 0},muted:{type:Boolean}},setup(s){const e=s,a={h1:"h1",h2:"h2",h3:"h3",h4:"h4",body:"p","body-sm":"p",caption:"span",label:"label"},t={h1:"text-2xl font-semibold text-text-primary",h2:"text-xl font-semibold text-text-primary",h3:"text-lg font-medium text-text-primary",h4:"text-base font-medium text-text-primary",body:"text-base text-text-primary","body-sm":"text-sm text-text-secondary",caption:"text-xs text-text-secondary",label:"text-sm font-medium text-text-secondary"},n=A(()=>e.as??a[e.variant]),o=A(()=>[t[e.variant],e.muted&&"text-text-secondary"].filter(Boolean).join(" "));return(u,g)=>(x(),w(I(n.value),{class:H(o.value)},{default:c(()=>[F(u.$slots,"default")]),_:3},8,["class"]))}}),B=Object.assign(ne,{__name:"UiTypography"});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const P=()=>{};function oe(s,e){function a(...t){return new Promise((n,o)=>{Promise.resolve(s(()=>e.apply(this,t),{fn:e,thisArg:this,args:t})).then(n).catch(o)})}return a}function ie(s,e={}){let a,t,n=P;const o=p=>{clearTimeout(p),n(),n=P};let u;return p=>{const y=$(s),v=$(e.maxWait);return a&&o(a),y<=0||v!==void 0&&v<=0?(t&&(o(t),t=void 0),Promise.resolve(p())):new Promise((h,i)=>{n=e.rejectOnCancel?i:h,u=p,v&&!t&&(t=setTimeout(()=>{a&&o(a),t=void 0,h(u())},v)),a=setTimeout(()=>{t&&o(t),t=void 0,h(p())},y)})}}function le(s,e=200,a={}){return oe(ie(e,a),s)}function ce(){const s=_(null),e=_(!1),a=_(null);async function t(n,o="metric"){e.value=!0,a.value=null;try{s.value=await $fetch("/api/weather",{params:{city:n,unit:o}})}catch{a.value="Error fetching weather"}finally{e.value=!1}}return{data:s,loading:e,error:a,fetchWeather:t}}const de={class:"min-h-screen flex justify-center px-4 py-16"},ue={class:"flex items-center gap-3"},me=["src","alt"],pe={class:"grid grid-cols-2 gap-4 text-sm text-text-secondary"},he={class:"flex items-center gap-2"},fe={class:"flex items-center gap-2"},ye={class:"flex items-center gap-2"},ve={class:"flex items-center gap-2"},we=L({__name:"weather",setup(s){const e=_(""),a=_("metric"),{data:t,loading:n,error:o,fetchWeather:u}=ce(),g=A(()=>e.value.trim().length>0&&!n.value);async function p(){g.value&&await u(e.value.trim(),a.value)}const y=_(""),v=le(h=>{y.value=h},500);return M(e,h=>{v(h.trim())}),M(y,async h=>{h.length<2||await u(h,a.value)}),M(a,async()=>{e.value.trim()&&await u(e.value.trim(),a.value)}),(h,i)=>(x(),D("main",de,[d(j,{class:"w-full max-w-md space-y-6"},{default:c(()=>[l("header",null,[d(B,{variant:"h1"},{default:c(()=>[...i[2]||(i[2]=[m("Weather API Lab",-1)])]),_:1}),d(B,{variant:"body-sm",muted:"",class:"mt-1"},{default:c(()=>[...i[3]||(i[3]=[m(" Real-time weather data powered by OpenWeather ",-1)])]),_:1})]),l("form",{class:"space-y-4",onSubmit:O(p,["prevent"])},[d(U,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=S=>e.value=S),label:"City",placeholder:"e.g. Rome"},{"icon-left":c(()=>[d(r(X),{class:"h-5 w-5 text-text-secondary"})]),_:1},8,["modelValue"]),d(z,{type:"submit",loading:r(n),disabled:!g.value},{"icon-left":c(()=>[r(n)?k("",!0):(x(),w(r(Y),{key:0,class:"h-5 w-5"}))]),default:c(()=>[i[4]||(i[4]=m(" Get Weather ",-1))]),_:1},8,["loading","disabled"])],32),r(n)?(x(),w(j,{key:0,class:"animate-pulse space-y-4"},{default:c(()=>[...i[5]||(i[5]=[l("div",{class:"h-5 bg-gray-200 rounded w-2/3"},null,-1),l("div",{class:"h-10 bg-gray-200 rounded w-1/2"},null,-1),l("div",{class:"grid grid-cols-2 gap-4"},[l("div",{class:"h-4 bg-gray-200 rounded"}),l("div",{class:"h-4 bg-gray-200 rounded"})],-1)])]),_:1})):k("",!0),r(o)?(x(),w(E,{key:1,type:"error"},{default:c(()=>[m(f(r(o)),1)]),_:1})):k("",!0),r(t)&&!r(n)?(x(),w(j,{key:2,class:"bg-surface-muted space-y-4"},{default:c(()=>[l("div",ue,[l("img",{src:`https://openweathermap.org/img/wn/${r(t).icon}@2x.png`,alt:r(t).condition,class:"h-12 w-12"},null,8,me),l("div",null,[d(B,{variant:"h3"},{default:c(()=>[m(f(r(t).city)+", "+f(r(t).country),1)]),_:1}),d(B,{variant:"body-sm",muted:"",class:"capitalize"},{default:c(()=>[m(f(r(t).condition),1)]),_:1})]),d(z,{size:"sm",onClick:i[1]||(i[1]=S=>a.value=a.value==="metric"?"imperial":"metric")},{default:c(()=>[m(f(a.value==="metric"?"°C":"°F"),1)]),_:1})]),l("div",pe,[l("div",he,[d(r(ee),{class:"h-4 w-4"}),m(" Feels like: "+f(r(t).feelsLike)+"°"+f(a.value==="metric"?"C":"F"),1)]),l("div",fe,[d(r(Q),{class:"h-4 w-4"}),m(" Humidity: "+f(r(t).humidity)+"% ",1)]),l("div",ye,[d(r(te),{class:"h-4 w-4"}),m(" Wind: "+f(r(t).windSpeed)+" "+f(a.value==="metric"?"m/s":"mph"),1)]),l("div",ve,[d(r(K),{class:"h-4 w-4"}),m(" "+f(new Date(r(t).sunrise).toLocaleTimeString()),1)])])]),_:1})):k("",!0),!r(t)&&!r(o)&&!r(n)?(x(),w(B,{key:3,variant:"caption",muted:"",class:"text-center"},{default:c(()=>[...i[6]||(i[6]=[m(" Enter a city name to retrieve current weather information ",-1)])]),_:1})):k("",!0)]),_:1})]))}});export{we as default};
